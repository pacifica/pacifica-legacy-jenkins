<?xml version='1.0' encoding='UTF-8'?>
<matrix-project>
  <actions/>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties/>
  <scm class="hudson.scm.NullSCM"/>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers class="vector"/>
  <concurrentBuild>false</concurrentBuild>
  <axes>
    <hudson.matrix.TextAxis>
      <name>DIST</name>
      <values>
        <string>epel-5-x86_64</string>
        <string>epel-6-x86_64</string>
        <string>fedora-18-x86_64</string>
      </values>
    </hudson.matrix.TextAxis>
    <hudson.matrix.LabelAxis>
      <name>label</name>
      <values>
        <string>pacifica</string>
      </values>
    </hudson.matrix.LabelAxis>
  </axes>
  <builders>
    <hudson.tasks.Shell>
      <command>export CREATEREPOOPTS=
export MOCKDISTPREFIX=
export REPODIR=/var/lib/jenkins/"$DIST"/
if [ "$DIST" = 'epel-5-x86_64' ]; then export CREATEREPOOPTS='-s sha'; 
fi
if [ -f /etc/pacifica/jenkins.sh ]; then . /etc/pacifica/jenkins.sh; fi
rm -rf archive.zip archive
wget ${JENKINS_URL}/job/elasticsearch-download/lastSuccessfulBuild/artifact/*zip*/archive.zip
unzip archive.zip
cd archive/elasticsearch-rpms
rm -rf packages
mkdir -p packages/"$DIST"/srpms
mkdir -p packages/"$DIST"/bin
MOCK=/usr/bin/mock
$MOCK -r "$MOCKDISTPREFIX$DIST" --buildsrpm --spec `pwd`/SPECS/elasticsearch.spec --sources "`pwd`"/SOURCES
mv "/var/lib/mock/$MOCKDISTPREFIX$DIST/result/"*.src.rpm packages/"$DIST"/srpms/
$MOCK -r "$MOCKDISTPREFIX$DIST" --result `pwd`/packages/"$DIST"/bin `pwd`/packages/"$DIST"/srpms/*.src.rpm
mkdir -p "$REPODIR"
cp -a packages/"$DIST"/bin/* "$REPODIR"
createrepo $CREATEREPOOPTS "$REPODIR"
</command>
    </hudson.tasks.Shell>
  </builders>
  <publishers/>
  <buildWrappers/>
  <executionStrategy class="hudson.matrix.DefaultMatrixExecutionStrategyImpl">
    <runSequentially>false</runSequentially>
  </executionStrategy>
</matrix-project>
  
